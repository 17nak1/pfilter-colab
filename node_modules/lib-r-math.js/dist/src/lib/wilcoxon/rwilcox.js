'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
var debug = require("debug");
var _general_1 = require("../common/_general");
var r_func_1 = require("../r-func");
var printer_rwilcox = debug('rwilcox');
var R_forceint = Math.round, trunc = Math.trunc, floor = Math.floor;
var ISNAN = Number.isNaN;
function rwilcox(N, m, n, rng) {
    return r_func_1.randomGenHelper(N, rwilcoxOne, m, n, rng);
}
exports.rwilcox = rwilcox;
function rwilcoxOne(m, n, rng) {
    if (ISNAN(m) || ISNAN(n))
        return m + n;
    m = R_forceint(m);
    n = R_forceint(n);
    if (m < 0 || n < 0)
        return _general_1.ML_ERR_return_NAN(printer_rwilcox);
    if (m === 0 || n === 0)
        return 0;
    var r = 0.0;
    var k = trunc(m + n);
    var x = Array.from(r_func_1.seq_len({ length: k, base: 0 }));
    printer_rwilcox("------v");
    for (var i = 0; i < n; i++) {
        var j = floor(k * rng.unif_rand());
        r += x[j];
        x[j] = x[--k];
        printer_rwilcox('i:%d,\tn:%d\tj:%d\tk:%d\tr:%d\tx:%o', i, n, j, k, x);
    }
    return r - n * (n - 1) / 2;
}
exports.rwilcoxOne = rwilcoxOne;
//# sourceMappingURL=rwilcox.js.map