"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var debug = require("debug");
var ML_NEGINF = Number.NEGATIVE_INFINITY, ML_POSINF = Number.POSITIVE_INFINITY, DBL_EPSILON = Number.EPSILON, ISNAN = Number.isNaN, R_FINITE = Number.isFinite;
var index_1 = require("../chebyshev/index");
var _general_1 = require("../common/_general");
var fabs = Math.abs, fmax2 = Math.max, fmin2 = Math.min;
var printer = debug('log1p');
function log1p(x) {
    var alnrcs = [
        +.10378693562743769800686267719098e+1,
        -.13364301504908918098766041553133e+0,
        +.19408249135520563357926199374750e-1,
        -.30107551127535777690376537776592e-2,
        +.48694614797154850090456366509137e-3,
        -.81054881893175356066809943008622e-4,
        +.13778847799559524782938251496059e-4,
        -.23802210894358970251369992914935e-5,
        +.41640416213865183476391859901989e-6,
        -.73595828378075994984266837031998e-7,
        +.13117611876241674949152294345011e-7,
        -.23546709317742425136696092330175e-8,
        +.42522773276034997775638052962567e-9,
        -.77190894134840796826108107493300e-10,
        +.14075746481359069909215356472191e-10,
        -.25769072058024680627537078627584e-11,
        +.47342406666294421849154395005938e-12,
        -.87249012674742641745301263292675e-13,
        +.16124614902740551465739833119115e-13,
        -.29875652015665773006710792416815e-14,
        +.55480701209082887983041321697279e-15,
        -.10324619158271569595141333961932e-15,
        +.19250239203049851177878503244868e-16,
        -.35955073465265150011189707844266e-17,
        +.67264542537876857892194574226773e-18,
        -.12602624168735219252082425637546e-18,
        +.23644884408606210044916158955519e-19,
        -.44419377050807936898878389179733e-20,
        +.83546594464034259016241293994666e-21,
        -.15731559416479562574899253521066e-21,
        +.29653128740247422686154369706666e-22,
        -.55949583481815947292156013226666e-23,
        +.10566354268835681048187284138666e-23,
        -.19972483680670204548314999466666e-24,
        +.37782977818839361421049855999999e-25,
        -.71531586889081740345038165333333e-26,
        +.13552488463674213646502024533333e-26,
        -.25694673048487567430079829333333e-27,
        +.48747756066216949076459519999999e-28,
        -.92542112530849715321132373333333e-29,
        +.17578597841760239233269760000000e-29,
        -.33410026677731010351377066666666e-30,
        +.63533936180236187354180266666666e-31,
    ];
    var nlnrel = 22;
    var xmin = -0.999999985;
    if (x === 0.)
        return 0.;
    if (x === -1)
        return (ML_NEGINF);
    if (x < -1)
        return _general_1.ML_ERR_return_NAN(printer);
    if (fabs(x) <= .375) {
        if (fabs(x) < .5 * DBL_EPSILON)
            return x;
        if ((0 < x && x < 1e-8) || (-1e-9 < x && x < 0))
            return x * (1 - .5 * x);
        return x * (1 - x * index_1.chebyshev_eval(x / .375, alnrcs, nlnrel));
    }
    if (x < xmin) {
        _general_1.ML_ERROR(_general_1.ME.ME_PRECISION, 'log1p', printer);
    }
    return Math.log(1 + x);
}
exports.log1p = log1p;
function hypot(a, b) {
    var p;
    var r;
    var s;
    var t;
    var tmp;
    var u;
    if (ISNAN(a) || ISNAN(b)) {
        return a + b;
    }
    if (!R_FINITE(a) || !R_FINITE(b)) {
        return ML_POSINF;
    }
    p = fmax2(fabs(a), fabs(b));
    if (p !== 0.0) {
        tmp = fmin2(fabs(a), fabs(b)) / p;
        r = tmp * tmp;
        while (true) {
            t = 4.0 + r;
            if (fabs(r) < 2 * DBL_EPSILON)
                break;
            s = r / t;
            u = 1 + 2 * s;
            p *= u;
            tmp = s / u;
            r *= tmp * tmp;
        }
    }
    return p;
}
exports.hypot = hypot;
//# sourceMappingURL=log1p.js.map