"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var debug = require("debug");
var _general_1 = require("../common/_general");
var dpois_1 = require("../poisson/dpois");
var log = Math.log;
var ISNAN = Number.isNaN;
var ML_POSINF = Infinity;
var printer = debug('dgamma');
function dgamma(x, shape, scale, aslog) {
    if (aslog === void 0) { aslog = false; }
    var pr;
    if (ISNAN(x) || ISNAN(shape) || ISNAN(scale))
        return x + shape + scale;
    if (shape < 0 || scale <= 0) {
        return _general_1.ML_ERR_return_NAN(printer);
    }
    if (x < 0) {
        return _general_1.R_D__0(aslog);
    }
    if (shape === 0) {
        return x === 0 ? ML_POSINF : _general_1.R_D__0(aslog);
    }
    if (x === 0) {
        if (shape < 1)
            return ML_POSINF;
        if (shape > 1) {
            return _general_1.R_D__0(aslog);
        }
        return aslog ? -log(scale) : 1 / scale;
    }
    if (shape < 1) {
        pr = dpois_1.dpois_raw(shape, x / scale, aslog);
        return aslog ? pr + log(shape / x) : pr * shape / x;
    }
    pr = dpois_1.dpois_raw(shape - 1, x / scale, aslog);
    return aslog ? pr - log(scale) : pr / scale;
}
exports.dgamma = dgamma;
//# sourceMappingURL=dgamma.js.map