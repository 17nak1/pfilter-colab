"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var debug = require("debug");
var _general_1 = require("../common/_general");
var rgamma_1 = require("../gamma/rgamma");
var rpois_1 = require("../poisson/rpois");
var r_func_1 = require("../r-func");
var R_FINITE = Number.isFinite;
var printer_rnbinom = debug('rnbinom');
function rnbinom(n, size, prob, rng) {
    printer_rnbinom('n:%d, size:%d, prob:%d', n, size, prob);
    return r_func_1.randomGenHelper(n, rnbinomOne, size, prob, rng);
}
exports.rnbinom = rnbinom;
function rnbinomOne(size, prob, rng) {
    if (!R_FINITE(size) ||
        !R_FINITE(prob) ||
        size <= 0 ||
        prob <= 0 ||
        prob > 1) {
        return _general_1.ML_ERR_return_NAN(printer_rnbinom);
    }
    return prob === 1
        ? 0
        : rpois_1.rpoisOne(rgamma_1.rgammaOne(size, (1 - prob) / prob, rng), rng);
}
exports.rnbinomOne = rnbinomOne;
var printer_rnbinom_mu = debug('rnbinom_mu');
function rnbinom_mu(n, size, mu, rng) {
    if (n === void 0) { n = 1; }
    printer_rnbinom_mu('n:%d, size:%d, mu:%d', n, size, mu);
    return r_func_1.randomGenHelper(n, _rnbinom_mu, size, mu, rng);
}
exports.rnbinom_mu = rnbinom_mu;
function _rnbinom_mu(size, mu, rng) {
    if (!R_FINITE(size) || !R_FINITE(mu) || size <= 0 || mu < 0) {
        return _general_1.ML_ERR_return_NAN(printer_rnbinom_mu);
    }
    return mu === 0
        ? 0
        : rpois_1.rpoisOne(rgamma_1.rgammaOne(size, mu / size, rng), rng);
}
//# sourceMappingURL=rnbinom.js.map